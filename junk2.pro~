@write_csv.pro
PRO JUNK2

;run numbers done: 3.6_131003, 3.6_131004, 5.0_130918(06-32)(34-59), 5.0_130913,
;	5.0_130911, 10.0_131018, 10.0_131025, 40.0_131025, 40.0_131016, 40.0_131009


current_vertical = ('\MACHINE::TOP.N6023F_01:INPUT_01')
current_total = ('\MACHINE::TOP.N6023F_01:INPUT_00')
time = 'dim_of('+current_total+')'





;for i=6, 29 do begin
;	;if i eq 28 then continue
;	case 1 of
;		(i lt 10): begin
;			s = string(13100900) + string(i)
;		end
;		(i ge 10): begin
;			s = string(1310090) + string(i)
;		end
;	endcase
;		shot = strcompress(s, /remove_all)
;		mdsopen, 'machine', shot , status=stat
;	
;		t = mdsvalue(time)
;		total = abs(mdsvalue(current_total)*1000)
;		vertical = abs(mdsvalue(current_vertical)*10*12.1)
;		toroidal = total - vertical
;	
;		time1 = 5
;		time2 = 20
;
;		start = time1*2500.0
;		finish = time2*2500.0
;		interval = finish - start
;
;		total_int = total[start:finish]
;		vertical_int = vertical[start:finish]
;		toroidal_int = toroidal[start:finish]
;		
;		if i eq 6 then begin
;			v = make_array(interval+1,1)
;			v = [[v],[vertical_int]]
;			v = transpose(v)
;		endif else begin
;			v = [v, [transpose(vertical_int)]]
;		endelse
;endfor

;vertical_data = v[1:*,*]
;write_csv_data, vertical_data, filename='junk2.csv', append=1

;write_csv_data, vertical_data, filename='40.0_131009.csv'




;sum_vertical = 0
;sum_toroidal = 0


cgdisplay, 1240, 960, /free
!P.MULTI = [1,5,6]

for i=6, 32 do begin

	if (i eq 6)||(i eq 7)||(i eq 8)||(i eq 9)||(i eq 10)||(i eq 19)||(i eq 20)||(i eq 28)||(i eq 29)||(i eq 34)||(i eq 35)||(i eq 36)||(i eq 37)||(i eq 38)||(i eq 45)||(i eq 46)||(i eq 53)||(i eq 54) then continue

	case 1 of
		(i lt 10): begin
			s = string(13091800) + string(i)
		end
		(i ge 10): begin
			s = string(1309180) + string(i)
		end
	endcase
		shot = strcompress(s, /remove_all)
		mdsopen, 'machine', shot
	
		t = mdsvalue(time)
		total = abs(mdsvalue(current_total)*1000)
		vertical = abs(mdsvalue(current_vertical)*10*12.1)
		toroidal = total - vertical
	
		time1 = 5.0
		time2 = 20.0

		start = time1*2500.0
		finish = time2*2500.0
		interval = finish - start
		
		t_int = t[start:finish]
		total_int = total[start:finish]
		vertical_int = vertical[start:finish]
		toroidal_int = toroidal[start:finish]


;		v_i_sum = total(vertical_int)
;		t_i_sum = total(toroidal_int)
;
;		print, [v_i_sum, t_i_sum]
;		
;		sum_vertical = sum_vertical + v_i_sum
;		sum_toroidal = sum_toroidal + t_i_sum

		if (i eq 18)||(i eq 8)||(i eq 9) then begin
			plot, t_int, vertical_int, color=500
		endif else begin
			plot, t_int, vertical_int
		endelse

endfor

;
;avg_v = (sum_vertical)/(interval*26)
;avg_t = (sum_toroidal)/(interval*26)
;
;print, [avg_v, avg_t]



mdsopen, 'machine', 130918006, status=stat
		t = mdsvalue(time)
		total = abs(mdsvalue(current_total)*1000)
		vertical = abs(mdsvalue(current_vertical)*10*12.1)
		toroidal = total - vertical
	
	
		time1 = 5
		time2 = 20

		start = time1*2500.0
		finish = time2*2500.0
		interval = finish - start
		
		t_int = t[start:finish]
		total_int = total[start:finish]
		vertical_int = vertical[start:finish]
		toroidal_int = toroidal[start:finish]

vertical_int = smooth(vertical_int, 7)
		
cgdisplay, 640, 640, /free
!P.MULTI = [0,2,1]
;plot, t, total
plot, t, vertical
;plot, t_int, vertical_int
plot, t, toroidal



END

